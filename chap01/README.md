깃허브 소스 : https://github.com/wickedwukong/martin-fowler-refactoring-2nd

**리팩터링이란?**
컽으로 드러나는 코드의 기능은 바꾸지 않으면서 내부 구조를 개선하는 방식으로 소프트웨어 시스템을 수정하는 과정.
요컨대, 리팩터링한다는 것은 코드를 작성하고 난 뒤에 설계를 개선하는 일.

처음부터 완벽한 설계를 갖추기보다는 개발을 진행하면서 지속적으로 설계한다. 


**리팩토링의 첫 단계.**
1) 자가진단 테스트 만들기 -> 4장
: 리팩토링 할 코드 영역을 꼼꼼하게 검사해줄 테스트 코드 마련. 이때 테스트 코드는 성공/실패를 스스로 판단하는 자가진단 테스트로 만듬.
★ 리팩터링 하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다. ★

**2) 함수 추출하기 -> 6.1 절**
: 새로 함수를 만들 때 바로 사용할 수 없는 변수가 있는지 확인한다. 
: 값을 변경하지 않기에 매개변수로 전달하는 함수들
: 함수 안에서 값이 바뀌는 경우 
: 함수 추출 이후에는 변수 명을 명확하게 바꿔주자.

★ 리팩터링은 프로그램 수정을 작은 단계로 나눠서 진행한다. 
그래서 중간에 실수하더라도 버그를 쉽게 찾을 수 있다.
작은 단계를 진행할 때 마다 컴파일 - 테스트 - 커밋 
변수 하나하나 바궈줄 때마다 컴파일 - 테스트 - 커밋하라.★

**3) 자동 리팩터링 도구를 사용하자**
: 함수 추출하기의 경우 흔히 IDE 에서 자동으로 수행해준다. 
: 변수 명을 변경했을 경우에도 '찾아 바꾸기' 를 이용하여 바꿔 줄 수 있다.
테스트가 있다면, 정적타입 언어를 사용한다면 발견하지 못한 곳도 찾아 줄 것이다.


**4) 임시 변수를 질의 함수로 바꾸기->7.4절**
: 

**5) 변수 인라인하기 -> 6.4 절**
인라인 : 코드 라인 자체를 안으로 이동

**6) 함수 선언 바꾸기 -> 6.5 절**

★ 함수 추출 작업 전에는 거의 항상 지역변수부터 제거해 주자. 
지역변수를 제거하면 추출 작업이 쉬워진다 ★

**7) 함수로 쓰고 있는 함수 변수를 일반 변수로 변경하자.** 
(간단하고 드물기에 따로 책에는 나와 있지 않다.)

**8) 반복문 쪼개기 -> 6.7 절**
: 말 그대로, 반복문 안에서 사용중인 변수를 같은 조건식으로 쪼갠다.

**9) 문장 슬라이스하기 -> 8.6절**
: 변수를 선언하는 문장을 반복문 바로 앞으로 옮긴다.

? 리팩토링이 성능에 영향을 미치지 않는가?
-> 물론 미칠 수 있다. 그러나 성능 차이를 체감하지 못할 것이다.
-> 때로는 리팩터링이 성능에 상당한 영향을 주기도 한다. 그러나, 진행한다.
잘 다듬어진 코드가 성능 개선 작업도 수월하다. 리팩터링 과정에서 성능이 떨어졌다면 리팩터링 후에 시간을 내어 성능을 개선한다.
결론 : 특별한 경우가 아니면 무시하고 리팩터링하라.

리팩터링의 단계를 잘게 쪼갠 뒤 ( 특히, 상황이 복잡할 경우)
자주 컴파일 -> 테스트 -> 커밋하라. 이게 작업 속도가 빨라지는 길이다.